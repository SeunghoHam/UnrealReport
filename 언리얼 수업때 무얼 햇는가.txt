2021 09 11
OT
1 수업때 어떤거를 하게 될것인가
1.1 레식같은 시스템의 게임
네트워크 fps 5대5
패키징을 하고 배포까지
etc + 서버 AWS EC2

폭탄전, 5대5 대전 라운드기반 FPS


2021 09 12
액션 매핑
1. Yaw pitch roll 설명 (마우스 회전)
2. wasd 축매핑 정의
3. 무브 포워드 Get Control Rotation -> MakeRotator -> GetForwardVector

플레이 창에서 플레이어수 2, 넷모드 Play as Client 하면 두명에서 하는듯하게 에디터에서 할 수 있다
4. 언리얼 네트워크 구조
언리얼은 Client - Server Model (중앙에 서버가 있고, 클라이언트들이 주변에서 접근을 하는 방식)

2 types
listen Server - 서버이자 클라이언트. 서버역할도 하고 클라역할도 하는 서버다
Dedicated Server - 서버 역할만 함. 렌더링 관련 처리 아예안함. 

Has Authority 엑터에 대한 권한을 가지고 있는지
시즈를 예로) 

비긴플레이에서 클라이언트와 서버가 해즈오쏘리티(권한)를 가지고 있는지 확인하기.(Okay Nope) 써있는 디버그 사진

3가지 rule
Authority - 모든 권한 ok
~ ?

서버에서. 내가 팀한테 데미지를 줬다. 
권한이 있는 상태에서는 데미지가 들어간다. 서버에서 호출되었기에,
하지만 클라이언트 기준에서는 데미지를 줄 권한이 없다.

09 18
Is Locally Controlled = 이 폰이 내(로컬)가 조종하는 폰인지 확인 가능

오른팔에서 라인 트레이스를 쏜다
시작점 : get world location
끝점 : get world location + forward로  *1000

break hit result 로 맞은 엑터의 정보를 출력시킴

코드에서 회전행렬사용



9 19
리소스 가져오기

스태틱 메시에 소켓 구성 및 사용하기

c++에서 액터 스폰
팔 매시 만들어서 넣기
블프로 한거 c++로 하기
 프레스 릴리즈 Fire버튼
 총 종류 넣기
 AACtor *WeaponActor
 GetWorld()->SpawnActor(종류, 위치, 스폰파라미터) 위치에 해당하는 값은 제로백터(identitiy(위치속성0 회전속성0)

코드를 Super::BeginPlay 위로 해줘야 실행 순서가 맞음

shoot -> 총의 발사 애니메이션, 캐릭터의 발사 애니메이션 같이 실행

GetLifetimeReplicatedProps

Replicated :  이 변수를 서버-클라이언트 값을 동기화 하는 변수로 쓰겟다하는것


(랩 노티파이)
ReplicatedUsing : 복제가 되면 알린다.
클라이언트에서 값이 도착하는 시점에서 함수를 호출한다.
동기화 되는 시점을 어떻게 처리하냐


9 26
SetupWeapon 함수 : 
총기를 셋업하는 과정은 OnRep_WeaponActor함수, OnSetupWeapon 이벤트에서 한다.

실무에서는 // [Client + Server] 라는 식으로 주석을 달아서 코드 읽기를 쉽게 함
맵 레벨 제작
HasAuthority 조건문에 SetupWeapon 을 넣지 않으면 캐릭터가 이상하게 나온다.

카메라 로테이션 고치기( 땅 볼때 원점을 기준으로 하는거 )

c++로 라인트레이스 하고 맞은 지점 드로우 하기

총 데미지 


10 2
애니메이션 넣을거다 팔에 있는쏘기, 총에있는 반동

UFUNCTION으로 빼놓은 함수들이 있다.  Gun의 OnFIre

몽타주에 관한 것
슬롯 추가해서 작업하기

서버에서 MulticastRPC를 실행시키면 엑터에 빙의한 캐릭터 만이 아닌 모두에게 호출된다.

NulticastFire_Implementation 함수를 서버에서 실행. Multicast함수는 서버에서 실행시켜야 유효하다.
(ServerFire_IMplementation 내부에서 MulticastFIre를 실행한다.)
서버에서 Multicast 실행 안하게 여러가지 조건을담

로코모션에 스테이트 만들어서 애니메이션 재생시킴
몽타주에서 이것저것 설정

UpperBody 슬롯 만들기
상체는 UpperBody 의 슬롯, 하체는 기본 이동 로코모션을 사용

애님BP에 레이어블랜드 추가 (본 단위로 레이러를 만들겠다)

세이브포즈?




걸으면서 발사하면 서서 발사하는 애니메이션 나옴

리슨서버를 고려하여 FIre함수의 조건을 바꿈

죽었을때 땅 뚫고 내려가는거 막기

RPC : 특정 상황, 단발성 이벤트를 위한 동기화 기법
변수동기화(replicated) : 지속성 있는 동기화가 필요할 때 